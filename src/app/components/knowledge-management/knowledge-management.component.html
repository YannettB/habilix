<mat-tab-group>
    <mat-tab label="Planes de trabajo">
        <mat-card id="first-card">
            <form (ngSubmit)="onSubmit()" #jsonForm="ngForm">
                <div class="file-container">
                    <input type="file" class="file-input" (change)="onFileSelected($event)" accept=".json" required>
                    <button mat-raised-button [disabled]="!jsonForm.valid">Guardar Plan de Trabajo</button>
                </div>
            </form>
        </mat-card>
        <mat-card>
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" #tablaSkillPlan>
                <!-- Columnas de la tabla -->
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> ID </th>
                    <td mat-cell *matCellDef="let plan"> {{ plan.id }} </td>
                </ng-container>

                <ng-container matColumnDef="lenguaje">
                    <th mat-header-cell *matHeaderCellDef> Lenguaje </th>
                    <td mat-cell *matCellDef="let plan"> {{ plan.lenguaje }} </td>
                </ng-container>

                <ng-container matColumnDef="acciones">
                    <th mat-header-cell *matHeaderCellDef> Acciones </th>
                    <td mat-cell *matCellDef="let plan">
                        <!-- Botón o link para ver el detalle del plan -->
                        <button mat-button (click)="verPlan(plan.id)">Ver</button>
                    </td>
                </ng-container>

                <!-- Definir las columnas a mostrar -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </mat-card>
    </mat-tab>
    <mat-tab label="Usuarios">
        <mat-card *ngIf="usuarioForm">
            <form [formGroup]="usuarioForm" (ngSubmit)="onSubmitUser()">
                <mat-form-field>
                  <mat-label>Usuario: </mat-label>
                  <input matInput placeholder="Nombre" formControlName="nombre" required>
                  <mat-error *ngIf="usuarioForm.get('nombre')?.invalid">Nombre es requerido</mat-error>
                </mat-form-field>
              
                <div formArrayName="conocimientos">
                  <div *ngFor="let conocimiento of conocimientosArray.controls; let i = index" [formGroupName]="i">
                    <mat-form-field>
                      <mat-label>Tecnología: </mat-label>
                      <input matInput placeholder="Tec ID" formControlName="tec_id" required>
                      <mat-error *ngIf="conocimientosArray.controls[i].get('tec_id')?.invalid">Tec ID es requerido</mat-error>
                    </mat-form-field>
              
                    <mat-form-field>
                      <mat-label>Puntuación: </mat-label>
                      <input matInput placeholder="Puntuacion" type="number" formControlName="puntuacion" required>
                      <mat-error *ngIf="conocimientosArray.controls[i].get('puntuacion')?.invalid">Puntuacion es requerida</mat-error>
                    </mat-form-field>
              
                    <button mat-icon-button color="warn" (click)="removerConocimiento(i)">
                      <mat-icon>remove_circle</mat-icon>
                    </button>

                  </div>
                </div>
              
                <button mat-raised-button color="primary" (click)="agregarConocimiento()">Agregar Conocimiento</button>
                <button mat-raised-button color="primary" type="submit" [disabled]="!usuarioForm.valid">Guardar Usuario</button>
              </form>              
        </mat-card>
    </mat-tab>
</mat-tab-group>