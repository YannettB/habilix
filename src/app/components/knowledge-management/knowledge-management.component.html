<mat-tab-group>
    <mat-tab label="Planes de trabajo">
        <mat-card id="first-card">
            <form (ngSubmit)="onSubmit()" #jsonForm="ngForm">
                <div class="file-container">
                    <input type="file" class="file-input" (change)="onFileSelected($event)" accept=".json" required>
                    <button mat-raised-button [disabled]="!jsonForm.valid">Guardar Plan de Trabajo</button>
                </div>
            </form>
        </mat-card>
        <mat-card>
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" #tablaSkillPlan>
                <!-- Columnas de la tabla -->
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> ID </th>
                    <td mat-cell *matCellDef="let plan"> {{ plan.id }} </td>
                </ng-container>

                <ng-container matColumnDef="lenguaje">
                    <th mat-header-cell *matHeaderCellDef> Lenguaje </th>
                    <td mat-cell *matCellDef="let plan"> {{ plan.lenguaje }} </td>
                </ng-container>

                <ng-container matColumnDef="acciones">
                    <th mat-header-cell *matHeaderCellDef> Acciones </th>
                    <td mat-cell *matCellDef="let plan">
                        <!-- Botón o link para ver el detalle del plan -->
                        <button mat-button (click)="verPlan(plan.id)">Ver</button>
                    </td>
                </ng-container>

                <!-- Definir las columnas a mostrar -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </mat-card>
    </mat-tab>
    <mat-tab label="Usuarios">
        <mat-card *ngIf="usuarioForm">
            <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()">
              <mat-form-field>
                <input matInput formControlName="nombre" placeholder="Usuario">
                <mat-error *ngIf="usuarioForm.get('nombre')?.invalid">Nombre es requerido</mat-error>
              </mat-form-field>
              <button mat-button color="primary" (click)="agregarUsuario()">Agregar Usuario</button>
            </form>
          
            <table mat-table [dataSource]="dataSourceUsuario" class="mat-elevation-z8">
              <!-- Columnas de la tabla -->
              <ng-container matColumnDef="usuario">
                <th mat-header-cell *matHeaderCellDef>Usuario</th>
                <td mat-cell *matCellDef="let usuario">{{ usuario.nombre }}</td>
              </ng-container>
              <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef>Acciones</th>
                <td mat-cell *matCellDef="let usuario">
                  <!-- Botón o link para ver el detalle del conocimiento -->
                  <button mat-button color="primary" (click)="verDetalle(usuario)">Ver Detalle</button>
                </td>
              </ng-container>
          
              <!-- Definir las columnas a mostrar -->
              <tr mat-header-row *matHeaderRowDef="displayedColumnsUsuario"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsUsuario;"></tr>
            </table>
          </mat-card>
          
          <!-- Detalle del conocimiento -->
          <div *ngIf="detalleConocimiento">
            <mat-card>
              <form [formGroup]="conocimientoForm">
                <mat-form-field>
                  <input matInput formControlName="tec_id" placeholder="Tecnología">
                </mat-form-field>
                <mat-form-field>
                  <input matInput formControlName="puntuacion" placeholder="Puntuación">
                </mat-form-field>
                <button mat-button color="primary" (click)="agregarConocimiento()">Agregar Conocimiento</button>
              </form>
          
              <table mat-table [dataSource]="dataSourceConocimiento" class="mat-elevation-z8">
                <!-- Columnas de la tabla -->
                <ng-container matColumnDef="tec_id">
                  <th mat-header-cell *matHeaderCellDef>Tecnología</th>
                  <td mat-cell *matCellDef="let conocimiento">{{ conocimiento.tec_id }}</td>
                </ng-container>
                <ng-container matColumnDef="puntuacion">
                  <th mat-header-cell *matHeaderCellDef>Puntuación</th>
                  <td mat-cell *matCellDef="let conocimiento">{{ conocimiento.puntuacion }}</td>
                </ng-container>
          
                <!-- Definir las columnas a mostrar -->
                <tr mat-header-row *matHeaderRowDef="displayedColumnsConocimiento"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsConocimiento;"></tr>
              </table>
            </mat-card>
          </div>
    </mat-tab>
</mat-tab-group>